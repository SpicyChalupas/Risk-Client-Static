<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Health Risk App — Sprint Scaffold</title>
  <style>
    body{font-family:system-ui,Segoe UI,Arial;max-width:720px;margin:40px auto;padding:0 16px}
    header{margin-bottom:16px}
    .card{border:1px solid #ddd;border-radius:12px;padding:16px;margin:16px 0}
    button{padding:10px 16px;border-radius:8px;border:1px solid #ccc;cursor:pointer}
    .ok{color:green} .bad{color:#b00020}
    label{display:block;margin:8px 0 4px}
    input{padding:8px;border:1px solid #ccc;border-radius:8px;width:100%}
    small{color:#555}
  </style>
</head>
<body>
  <header>
    <h1>Health Risk App</h1>
    <p><small>Requirement note: client asks questions and shows instructions but does not do any calculations. The server will do all calculations.</small></p>
  </header>

  <div class="card">
    <h2>Server wake up</h2>
    <p>Status: <span id="status">not checked</span></p>
    <button id="ping">Ping server</button>
  </div>

  <div class="card">
    <h2>Start instructions</h2>
    <ol>
      <li>Enter your info below. The app will send it to the server for calculation.</li>
      <li>No math is done here on the page.</li>
      <li>Invalid inputs will be highlighted with friendly messages.</li>
    </ol>
    <p><small>English units are used: feet and inches for height, pounds for weight.</small></p>
  </div>

  <div class="card">
    <h2>Inputs (client does not calculate)</h2>
    <label>Age
      <input id="age" type="number" min="0" placeholder="e.g., 25"/>
    </label>
    <label>Height — feet
      <input id="feet" type="number" min="2" placeholder="min 2 feet"/>
    </label>
    <label>Height — inches
      <input id="inches" type="number" min="0" max="11" placeholder="0 to 11"/>
    </label>
    <label>Weight — pounds
      <input id="pounds" type="number" min="1" placeholder="e.g., 160"/>
    </label>
    <button id="submit" disabled>Submit to server (disabled in scaffold)</button>
    <p><small>This scaffold only sets up UI and server ping. You will wire this button to Node APIs later.</small></p>
  </div>

  <script>
    // replace this after the server is deployed
    const API_BASE = "risk-server-d8cheeg4heguhkh0.centralus-01.azurewebsites.net";

    const statusEl = document.getElementById("status");
    const pingBtn = document.getElementById("ping");

    async function ping() {
      statusEl.textContent = "checking...";
      try {
        const res = await fetch(`${API_BASE}/api/ping`, { cache: "no-store" });
        const data = await res.json();
        statusEl.innerHTML = `<span class="ok">ok</span> — ${new Date(data.now).toLocaleString()} (uptime ${data.uptimeSeconds}s)`;
      } catch (e) {
        statusEl.innerHTML = `<span class="bad">server not reachable</span>`;
        console.error(e);
      }
    }

    // wake server on load, and allow manual ping
    window.addEventListener("load", ping);
    pingBtn.addEventListener("click", ping);
  </script>
</body>
</html>
